# Исправление ошибок переключения раскладок клавиатуры (snoop)
## Назначение
Иногда программистам приходится активно использовать две раскладки клавиатуры: английскую и русскую. 
При этом часто большой кусок введенного текста оказывается не в той раскладке.
Приведенный скрипт на языке AutoHotKey позволяет быстро исправить раскладку выделенного текста в любом текстовом редакторе.
Для перекодировки достаточно выделить текст и нажать клавишу Break.
Также есть дополнительные опции перекодировки выделенного текста (смена регистра и пр.). Вот полный список преобразований:

| сочетание | действие |
| ----- | ----- |
| Break | заменить все английские символы на кириллические, и наоборот |
| Ctrl-Shift-PageUp | сменить регистр каждого символа на противоположный |
| Win-PageUp | все символы - в верхний регистр |
| Win-PageDown | все символы - в нижний регистр |
| Alt-Shift-\\ | в тексте заменить все правые слеши (/) на левые (\\) |
| Alt-Shift-] | в тексте убрать все квадратные скобки (\[ и \]) |

## История
Оригинальная идея была мной подсмотрена в утилите "Опечатка by Dr. Golomin". Этой утилитой я пользовался примерно 18 лет (2001-2018), за что очень благодарен автору, Евгению Голомину.

## Как это работает
Как только Вы обнаружили, что введенный текст оказался в неправильной кодировке, Вам нужно (1) выделить "неправильный" текст и (2) нажать кнопку Break.
Скрипт (1) перекодирует все символы и (2) определит по первому символу раскладку ввода, и сменит ее на альтернативную (если первый символ выделенного текста был английским, то будет активирована русская раскладка, и наоборот).
Таблицы перекодировки устроены очень просто:

1. в первой содержатся все символы английской клавиатуры в порядке их следования при простом последовательном нажатии, если начать из левого верхнего угла QWERTY и двигаться по строкам в направлении правого нижнего угла;
сначала переччислены все символы верхнего регистра, потом - все символы нижнего регистра;
2. во второй в том же порядке перечислены символы русской раскладки.

```
static f := "QWERTYUIOP{}ASDFGHJKL:""|ZXCVBNM<>?qwertyuiop[]asdfghjkl;'\zxcvbnm,./``~!@#$`%^&"
static g := "ЙЦУКЕНГШЩЗХЪФЫВАПРОЛДЖЭ/ЯЧСМИТЬБЮ,йцукенгшщзхъфывапролджэ\ячсмитьбю.ёЁ!""№;`%:?"
ff = %f%%g%
gg = %g%%f%
```